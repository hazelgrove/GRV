graph G {
  rankdir=LR
  compound=true
  splines=true
  concentrate=true

  node [shape=none]

  {rank=same; Async_kernel; Incr_dom}

  node [shape=box]

  Grap [label="Graph"]
  Edg [label="Edge"]
  Verte [label="Vertex"]

  subgraph cluster_web {
    label="grvweb"
    App; Main; View
  }

  subgraph cluster_whole_core {

  subgraph cluster_mid {
    style="invis"
    {rank=min; Action; Model; State}
    Action -- State
  }

  subgraph cluster_core {
    label="grvcore"
    style="dashed,rounded"
    {rank=min; Grap; Edge_state; Graph_action}
    {rank=same; Edg; Cursor}
    {rank=same; Verte; Index}
    Grap; Edg; Edge_state; Verte; Constructor; Cursor; Index
  }

  }

  {Async_kernel; Incr_dom} -- Main [lhead=cluster_web]
  View -- Action [ltail=cluster_web; lhead=cluster_mid]
  Action -- Grap [ltail=cluster_mid; lhead=cluster_core]
  Model -- {Action; View} [ltail=cluster_mid; lhead=cluster_web]

  Main -- App -- View

  Grap -- {Verte; Cursor; Edg; Edge_state}

  {Verte; Index} -- Constructor

  Cursor -- {Verte; Index}

  Edg -- {Verte; Cursor}

  Graph_action -- Grap [style=dashed]

}
